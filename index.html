<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Product App</title>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
</head>
<body>
    <!--<script type="text/javascript">
        var books = [
            {
                "title": "JavaScript, the Definitive Guide",
                "publisher": "O'Reilly",
                "author": "David Flanagan",
                "cover": "/images/cover_defguide.jpg",
                "blurb": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit."
            },
            {
                "title": "DOM Scripting",
                "publisher": "Friends of Ed",
                "author": "Jeremy Keith",
                "cover": "/images/cover_domscripting.jpg",
                "blurb": "Praesent et diam a ligula facilisis venenatis."
            },
            {
                "title": "DHTML Utopia: Modern Web Design using JavaScript & DOM",
                "publisher": "Sitepoint",
                "author": "Stuart Langridge",
                "cover": "/images/cover_utopia.jpg",
                "blurb": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit."
            }
        ];
    </script>-->

    <div>
        <h2>All Products</h2>
        <ul id="products" />
    </div>
    <div>
        <h2>Search by ID</h2>
        <input type="text" id="prodId" size="5" />
        <input type="button" value="Search" onclick="find();" />
        <p id="product" />
    </div>

    <!--<div>
        <table id="prod" cellpadding="2" cellspacing="2" border="1" >
            <tr>
                <td style="background-color: gray; color: white">ID</td>
                <td style="background-color: gray; color: white">Name</td>
                <td style="background-color: gray; color: white">Category</td>
                <td style="background-color: gray; color: white">Price</td>
            </tr>
        </table>
    </div>--> 

    <div>
        <table id="book" cellpadding="2" cellspacing="2" border="1">
            <tr>
                <td>Title</td>
                <td>Publisher</td>
                <td>Author</td>
                <td>Cover</td>
            </tr>
        </table>
    </div> 

    
    <script>
        $(document).ready(function () {
            //$.getJSON("books.json", function (data) {
            //    $.each(data.books, function (i, item) {
            //     alert(item.author);
            //    });
            //});

            $.ajax({
                type: "get",
                url: "books.json",
                success: function (data) {
                    $.each(data.books, function (key, item) {
                        $('#book').append("<tr><td>" + item.title + "</td>" + "<td>" + item.publisher + "</td>" + "<td>" + item.author + "</td>" + "<td>" + item.cover + "</td></tr>");
                    });
                }
            });

            //$.ajax({
            //    type: "get",
            //    url: "api/products",
            //    success: function (data) {
            //        $.each(data, function (key, item) {
            //            $('<li>', { text: formatItem(item) }).appendTo($('#products'));
            //        });

            //        $.each(data, function (key, item) {
            //            $('#prod').append("<tr><td>" + item.Id + "</td>" + "<td>" + item.Name + "</td>" + "<td>" + item.Category + "</td>" + "<td>" + item.Price + "</td></tr>");
            //        });  
            //    }
            //})
        });

    ////////$(document).ready(function () {
    ////////  // Send an AJAX request
    ////////  $.getJSON(uri)
    ////////      .done(function (data) {
    ////////        // On success, 'data' contains a list of products.
    ////////        $.each(data, function (key, item) {
    ////////          // Add a list item for the product.
    ////////          $('<li>', { text: formatItem(item) }).appendTo($('#products'));
    ////////        });
    ////////      });
    ////////});

    function formatItem(item) {
      return item.Name + ': $' + item.Price;
    }

    function find() {
      var id = $('#prodId').val();
      $.getJSON(uri + '/' + id)
          .done(function (data) {
            $('#product').text(formatItem(data));
          })
          .fail(function (jqXHR, textStatus, err) {
            $('#product').text('Error: ' + err);
          });
    }
    </script>
</body>
</html>